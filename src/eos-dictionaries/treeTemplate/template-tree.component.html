<ng-container *ngTemplateOutlet="treeTmpl; context: {items: data}"></ng-container>
<ng-template #treeTmpl let-items="items">
    <div *ngFor="let node of items"
        class="eos-tree-node">
        <ng-container *ngTemplateOutlet="treeNodeTmpl; context:{node: node}"></ng-container>
    </div>
</ng-template>

<ng-template #treeNodeTmpl
    let-node="node">
    <ng-container *ngIf="node">
        <div class="node"
            #el
            (click)="onSelect($event, node)"
            [ngClass]="{'highlighted' : nodeId === node.id }"
            [ngStyle]="{'padding-left.px': getPadding(node.level)}">
            <!-- span class="fake-padding"></span -->
            <div class="tree-btn"
                (click)="onExpand($event, node)">
                <span *ngIf="node.expandable"
                    class="eos-icon tringle-size icon"
                    [ngClass]="{'eos-icon-open-folder-blue': node.isExpanded, 'eos-icon-close-folder-blue': !node.isExpanded}"></span>
            </div>
            <div class="title"
                [ngClass]="{'select': nodeId === node.id}"
                [style.width.px]="getNodeWidth(level)"
                [attr.id]="node.id">
                <span class="title-item">{{node.title}}</span>
               <!--  <eos-spinner *ngIf="node.updating"
                    size="sm"></eos-spinner> -->
            </div>
        </div>
        <ng-container *ngIf="node.isExpanded">
            <ng-container *ngTemplateOutlet="treeTmpl; context: {items: node.children}"></ng-container>
        </ng-container>
    </ng-container>
</ng-template>
