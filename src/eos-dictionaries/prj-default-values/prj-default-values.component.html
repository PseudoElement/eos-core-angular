<div class="modal-header">
    <h4 class="modal-title pull-left">Реквизиты РКПД "{{nodeDescription}}"</h4>
</div>
<div class="spinner-container text-center" *ngIf="isUpdating" >
    <eos-spinner size="lg"></eos-spinner>
</div>
<div class="modal-body" *ngIf="!isUpdating">
    <div class="tab-buttons eos-switch btn-group">
        <a class="tab-button btn btn-primary switch-item text-uppercase"
           [ngClass]="{'btn-primary-full': isDefaultTab}"
           (click)="setTab(0)">По умолчанию</a>
        <a class="tab-button btn btn-primary switch-item text-uppercase"
           [ngClass]="{'btn-primary-full': isReqiredTab}"
           (click)="setTab(1)">Обязательные</a>
        <a class="tab-button btn btn-primary switch-item text-uppercase"
           [ngClass]="{'btn-primary-full': isFilesTab}"
           (click)="setTab(2)">Файлы</a>
    </div>
    <p class="xl-font paragraph-title no-marigin-bottom"></p>
    <div class="edit-content">
        <div class="defaultTab" [hidden]="!isDefaultTab">
            <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.CONSISTS']"
                               [form]="form"></eos-dynamic-input>
            <!-- Срок исполнения -->
            <!-- <div class="clearfix">
                <div>
                    <div class="term-exec">
                        <label>Срок исп. (План. дата)</label>
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.TERM_EXEC']"
                                           [form]="form"></eos-dynamic-input>
                    </div>
                    <label>дня (дней) от даты регистрации</label>
                </div>
            </div> -->

            <div>
                <span class="span-one-by-one">
                <div class="col1 col-with-label">
                        <!-- Срок исполнения -->
                        <label>Срок исп. (План. дата)</label>
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.TERM_EXEC']"
                                           [form]="form"></eos-dynamic-input>
                </div>
                <eos-dynamic-input class="col2"
                    [input]="inputs['PRJ_DEFAULT_VALUE_List.TERM_EXEC_TYPE']"
                    [form]="form"
                    [hideLabel]="true"
                    ></eos-dynamic-input>
                <label class="col3">{{dayTypeTitle + ' от даты регистрации'}}</label>
                </span>
            </div>

            <div class="clear-both">
                <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SECURLEVEL']"
                                   [viewOpts]="selOpts"
                                   [style.color]="securColor('PRJ_DEFAULT_VALUE_List.SECURLEVEL')"
                                   [form]="form"></eos-dynamic-input>
            </div>
            <div class="exec-list margin-b">
                <p class="xl-font paragraph-title">Доп. исполнители</p>
                <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.PRJ_EXEC_LIST']"
                                   [viewOpts]="selOpts"
                                   [form]="form"></eos-dynamic-input>
                <div class="columns">
                    <div class="left">
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.CAN_MANAGE_EXEC']"
                                           [disabled]="!isPrjExecFull"
                                           [form]="form"></eos-dynamic-input>
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.CAN_WORK_WITH_PRJ']"
                                           [disabled]="!isPrjExecFull"
                                           [form]="form"></eos-dynamic-input>
                    </div>
                    <div class="right">
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.CAN_WORK_WITH_FILES']"
                                           [disabled]="!isPrjExecFull"
                                           [form]="form"></eos-dynamic-input>
                        <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.CAN_MANAGE_APPROVAL']"
                                           [disabled]="!isPrjExecFull"
                                           [form]="form"></eos-dynamic-input>
                    </div>
                </div>
            </div>

            <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.ANNOTAT']"
                               [form]="form"></eos-dynamic-input>
            <div class="visa margin-b">
                <p class="xl-font paragraph-title">Визы</p>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.VISA_ISN_LIST']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.VISA_OUTER_ISN_LIST']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
            </div>
            <div class="sign margin-b">
                <p class="xl-font paragraph-title">Подписи</p>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SIGN_ISN_LIST']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SIGN_OUTER_ISN_LIST']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
            </div>
            <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.FILE']"
                               [viewOpts]="selOpts"
                               [form]="form"></eos-dynamic-input>
            <div class="send margin-b">
                    <p class="xl-font paragraph-title">Адресаты</p>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SEND_ISN_LIST_DEP']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SEND_ISN_LIST_ORGANIZ']"
                                       [viewOpts]="selOpts"
                                       [form]="form"></eos-dynamic-input>
            </div>
            <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.NOTE']"
                               [form]="form"></eos-dynamic-input>
            <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.RUBRIC_LIST']"
                               [viewOpts]="selOpts"
                               [form]="form"></eos-dynamic-input>
            <div style="padding-bottom: 100px;"></div>
        </div>
        <div class="requiredTab eos-rk-mandatory" [hidden]="!isReqiredTab">
            <eos-dynamic-input *ngFor="let key of requiredItems"
                               [input]="inputs[key]"
                               [readonly]="inputs[key].readonly"
                               [form]="form"></eos-dynamic-input>
        </div>
        <div class="filesTab" [hidden]="!isFilesTab">
            <eos-rk-input-files
                [inputSize]="inputs['DG_FILE_CONSTRAINT_List.PRJ_RC.MAX_SIZE']"
                [inputCb]="inputs['DG_FILE_CONSTRAINT_List.PRJ_RC.ONE_FILE']"
                [inputExt]="inputs['DG_FILE_CONSTRAINT_List.PRJ_RC.EXTENSIONS']"
                [form]="form"
                [editMode]="true"
                title="Файлы РКПД">
            </eos-rk-input-files>
            <eos-rk-input-files
                [inputSize]="inputs['DG_FILE_CONSTRAINT_List.PRJ_VISA_SIGN.MAX_SIZE']"
                [inputCb]="inputs['DG_FILE_CONSTRAINT_List.PRJ_VISA_SIGN.ONE_FILE']"
                [inputExt]="inputs['DG_FILE_CONSTRAINT_List.PRJ_VISA_SIGN.EXTENSIONS']"
                [form]="form"
                [editMode]="true"
                title="Файлы визы и подписи">
            </eos-rk-input-files>
            <div style="margin-top: 20px;">
                <div class="col-1">
                    <eos-dynamic-input [input]="inputs['PRJ_DEFAULT_VALUE_List.SECURLEVEL_FILE']"
                                                    [form]="form"
                                                    [viewOpts]="selOpts"
                                                    [style.color]= "securColor('PRJ_DEFAULT_VALUE_List.SECURLEVEL_FILE')"
                                                  ></eos-dynamic-input>

                </div>
            </div>
            <div class="items-group">
                <div class="col-1">
                <eos-dynamic-input *ngIf="isSecurLavelAccessEnabled"  [input]="inputs['PRJ_DEFAULT_VALUE_List.ACCESS_MODE_FILE']"
                                                [form]="form"

                                                ></eos-dynamic-input>
                </div>
                <div class="col-2">
                <eos-dynamic-input  *ngIf="isFileAccessEnabled"
                [input]="inputs['PRJ_DEFAULT_VALUE_List.REF_FILE_ACCESS_LIST']"
                                                [form]="form"
                                                [hideLabel]="true"
                                                [viewOpts]="selOpts"
                                               ></eos-dynamic-input>
                </div>
        </div>
    </div>
</div>
<div class="modal-footer">
    <div class="pull-left">
        <button class="btn btn-primary-full upper"
                (click)="userListsEdit()">Ведение списков</button>
    </div>
    <div class="pull-right">
        <button class="btn btn-primary-full upper"
                [disabled]="formInvalid"
                (click)="save()">Записать</button>
        <button class="btn btn-primary upper"
                (click)="cancel()">Отменить</button>
    </div>
</div>
