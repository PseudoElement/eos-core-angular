<eos-param-header [title]="titleHeader" (submitForm)="startSubmit()" (cancelForm)="cancel()" [statusBtnSub]="disabledSubmit"></eos-param-header>
<main *ngIf="!isLoading; else spiner">
    <div>
        <div class="form-group create-user-login-input log">
            <label>ЛОГИН</label>
            <div class="type-user">
                <div class="required">
                    <form [formGroup]="form">
                        <input
                            placement="bottom"
                            containerClass="tooltip-info"
                            [tooltip]="'Максимальная длина поля ' + loginMaxLength +' символов'"
                            class=" form-control"
                            [maxlength]="loginMaxLength"
                            type="text"
                            [formControlName]="inputs['classifName'].key"
                            [readonly]="false"
                        />
                    </form>
                </div>
                <eos-dynamic-input
                    class="base-multiply-input base-template-input type-input"
                    [input]="inputs['USER_TYPE']"
                    [form]="form"
                    [readonly]="false"
                ></eos-dynamic-input>
            </div>
        </div>
        <!-- <eos-dynamic-input class="create-user-login-input" [input]="inputs['classifName']" [form]="form" [readonly]="false"></eos-dynamic-input> -->
        <eos-dynamic-input
            style="display: block;"
            *ngIf="!cbBase"
            [input]="inputs['teсhUser']"
            [form]="form"
            [readonly]="false"
            [tooltip]="'К техническим пользователям невозможно привязать должностное лицо'"
            placement="left"
        ></eos-dynamic-input>
    </div>
    <div [ngClass]="{'flex-wr': !cbBase}">
        <div [formGroup]="form" class="dynamic-input-wrapper inline-block base-department-input">
            <label [attr.for]="inputs['DUE_DEP_NAME'].key">{{inputs['DUE_DEP_NAME'].label}}</label>
            <div class="create-user-wr" style="width: 363px">
                <input class="form-control m-font inline-block" readonly [formControlName]="inputs['DUE_DEP_NAME'].key" [id]="inputs['DUE_DEP_NAME'].key" type="text" [placeholder]="inputs['DUE_DEP_NAME'].label">
                <span class="icon eos-icon small icon-add-department" [ngClass]="{'eos-icon-avatar-blue': form.get('DUE_DEP_NAME').enabled, 'eos-icon-avatar-grey': form.get('DUE_DEP_NAME').disabled}" [ngStyle]="{'margin-right': !form.value['DUE_DEP_NAME'] ? '0px' : '28px'}"
                 (click)="selectDepartment(form.get('DUE_DEP_NAME').enabled)"></span>
                <a [ngClass]="{'hide': !form.value['DUE_DEP_NAME']}" (click)="cleanDue()"><span class="eos-icon eos-icon-close-blue small"></span></a>
            </div>
        </div>
        <!-- <eos-dynamic-input *ngIf="!cbBase" class="base-text-input base-input-role" [input]="inputs['SELECT_ROLE']" [form]="form" [readonly]="form.get('SELECT_ROLE').disabled"></eos-dynamic-input> -->
         <eos-dynamic-input *ngIf="!cbBase" class="base-text-input base-input-role" [input]="inputs['SELECT_ROLE']" [form]="form" [readonly]="false"></eos-dynamic-input>
    </div>
    <div *ngIf="!cbBase" [formGroup]="form" class="dynamic-input-wrapper inline-block base-department-input">
        <label [attr.for]="inputs['USER_COPY'].key">{{inputs['USER_COPY'].label}}</label>
        <div class="create-user-wr" style="width: 363px">
            <input class="form-control m-font inline-block" (keyup)="delSelectUser($event)" readonly [formControlName]="inputs['USER_COPY'].key" [id]="inputs['USER_COPY'].key" type="text" [placeholder]="inputs['USER_COPY'].label" autocomplete="off">
            <span
            class="icon eos-icon  small icon-add-department"
            [ngClass]="{'eos-icon-avatar-blue': !form.get('USER_TEMPLATES').value, 'eos-icon-avatar-grey': form.get('USER_TEMPLATES').value}"
            (click)="selectUser(form.get('USER_TEMPLATES').value)"
            ></span>
        </div>
    </div>
    <eos-dynamic-input
        *ngIf="!cbBase"
        class="base-multiply-input base-template-input"
        [input]="inputs['USER_TEMPLATES']"
        [form]="form"
        [readonly]="form.get('USER_COPY').value || checkUnreadFlag"
    ></eos-dynamic-input>
</main>

<div *ngIf="isShell" class="shell"></div>

<ng-template #spiner>
    <div class="spiner-div">
        <eos-spinner size="lg"></eos-spinner>
    </div>
</ng-template>

<ng-template #templatePassword tabindex="1" role="dialog" aria-labelledby="dialog-nested-name2">
    <div class="modal-header">
        <h4 class="modal-title pull-left">Введите пароль</h4>
        <button type="button" class="close pull-right" aria-label="Close" (click)="closeSubModal()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form  (ngSubmit)="modalRef.hide()">
            <input name="pass" id="inpPass" class="passInput" type="password" [(ngModel)]="password">
            <div>
                <input name="repPass" [ngStyle]="{'border-color': !validPassword ? 'red' : '#2196f3'}" class="passInput" style="margin-top: 5px;" type="password"[(ngModel)]="repitedPassword">
                <alert *ngIf="!validPassword && (password.length || repitedPassword.length)" type="danger">
                    Пароли не совпадают
                </alert>
            </div>
            <button [disabled]="!validPassword" type="submit" class="btn btn-primary-full ">ок</button>
        </form>
    </div>
</ng-template>

<ng-container *ngIf="enterPassword">
    <div class="preview"></div>
</ng-container>
