<div class="full-search-top usual-border">
    <span class="pull-left title xl-font">Настройка ролей</span>
    <div class="pull-right srch-btns">
        <button style="height: 28px; width: 86px; padding-top: 5px;" class="btn btn-primary s-font upper" (click)="close()">Отменить</button>
        <button style="height: 28px; width: 86px; padding-top: 5px;" class="btn btn-primary-full s-font upper" (click)="save()">Сохранить</button>
    </div>
</div>
<div class="modal-body-cb" *ngIf="deletRole">
    <div class="modal-b-cont-role">
        <div class="col-l">
            <span class="long-title xl-font">Выберите роль</span>
            <div class="info-block-cb-l" >
                <div id="fixed" [dragula]='"fixed-bag"'>
                    <div style="display: flex;" class="item-cb" *ngFor="let item of fixedFields" (click)="select(item, 3)" [ngClass]="{'highlighted': item === selectedFixedItem}">
                        <div>
                            <span class="eos-adm-icon small eos-adm-icon-lock-black"></span>
                        </div>
                        <div style="padding-top: 5px; margin-left: 5px;">
                            <span class="text-cb">{{item?.role}}</span>
                        </div>
                    </div>
                </div>
                <div id="basic" class="basic-cb" [dragula]='"bag-one"'[dragulaModel]="basicFields">
                    <div style="margin-left: 28px;" class="item-cb" *ngFor="let item of basicFields" (click)="select(item, 1)" [ngClass]="{'highlighted': item === selectedBasicRole}">
                        <span class="text-cb">{{item?.role}}</span>
                    </div>
                </div>
            </div>
            <div class="checkbox-due-top">
                <label class="checkbox">
                    <input type="checkbox" [checked]="rightsDueRole" (change)="rightsDueRole = !rightsDueRole">
                    <span class="eos-adm-icon eos-adm-icon-checkbox-square-blue x-small"></span>
                    Добавлять права за ДЛ роли
                </label>
            </div>
        </div>
        <div class="driver-r">
            <span>
                <button class="btn btn-primary-light" (click)="addToCurrent()">
                    <span class="eos-adm-icon eos-adm-icon-arrow-v-blue-right"></span>
                </button>
                <button class="btn btn-primary-light" (click)="removeFromCurrent()">
                    <span class="eos-adm-icon eos-adm-icon-arrow-v-blue-left"></span>
                </button>
            </span>
        </div>
        <div class="col-r" style="width: 100%;">
            <span class="long-title xl-font">Назначение роли</span>
            <div class="title-dir-role-button">
                <div class="change-due">
                    <button
                        style="width: 47px;height: 47px;background: #f5f5f5;border: 0;"
                        eosClickMode
                        class="btn"
                        [ngClass]="[btnChangeDue ? 'btn-primary' : 'btn-not-active']"
                        [disabled]="!btnChangeDue"
                        (click)="changeDueRole()"
                        [tooltip]="'Изменить должностное лицо'"
                        triggers="hover:focus"
                        container="body"
                        placement="bottom"
                        containerClass="tooltip-info">
                        <span [ngClass]="[btnChangeDue ? 'eos-adm-icons-take-right-from-blue' : 'eos-adm-icons-take-right-from-grey']" class="eos-adm-icon small get"></span>
                    </button>
                </div>
            </div>
            <div class="modal-block-cb-r">
                <div class="title-dir-role">
                    <div class="text-cb-r">
                        <span>Роль</span>
                    </div>
                    <div class="text-cb-r">
                        <span>ДЛ руководителя</span>
                    </div>
                    <div class="text-cb-r">
                        <span>Помощники руководителя</span>
                    </div>
                </div>
                <div class="info-block-cb-r" [dragula]='"bag-one"'  [dragulaModel]="currentFields" id="current">
                    <div class="item-cb-r" id="cur-item" *ngFor="let item of currentFields" (click)="select(item, 2)" [ngClass]="{'highlighted': item === selectedCurrRole}">
                        <div class="text-cb-r">
                            <span>{{item?.role}}</span>
                        </div>
                        <div class="text-cb-r">
                            <span>{{item?.dueName}}</span>
                        </div>
                        <div class="text-cb-r">
                            <span>{{item?.asistMan}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal-body-cb" *ngIf="!deletRole">
    <div class="spinner-wrapper" >
        <eos-spinner [size]="'lg'"></eos-spinner>
    </div>
</div>
<div *ngIf="isShell" class="shell"></div>